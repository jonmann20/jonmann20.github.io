<!DOCTYPE html><html><head><title>Vamp: The Great and Powerful</title><style>body{background:#141a1e;margin:0}.btn-back{position:absolute;top:20px;left:20px;color:#5badd6;text-decoration:none}.btn-back:hover{color:#70b7db;text-shadow:#70b7db 0 0 6px}.canvas-wrap{width:1008px;margin:75px auto 0}</style></head><body><script>/*! For license information please see vamp.js.LICENSE.txt */
(()=>{"use strict";const t=-1;class e{constructor(){this.keysDown={},this.lastKeyDown=t;let e=t;addEventListener("keydown",(t=>{const e=this.fixKey(t.keyCode);this.keysDown[e]||(this.lastKeyDown=e,this.keysDown[e]=!0)})),addEventListener("keyup",(t=>{e=this.fixKey(t.keyCode),delete this.keysDown[e]}))}fixKey(t){return 87===t?t=38:83===t?t=40:68===t?t=39:65===t&&(t=37),t}}class s{constructor(t){this.gEngine=t}switchView(t){t.init(),this.gEngine.view=t}}var i={};function o(t,e){this.x=t||0,this.y=e||0}function r(t,e){this.pos=t||new o,this.r=e||0}function n(t,e){this.pos=t||new o,this.angle=0,this.offset=new o,this.setPoints(e||[])}function a(t,e,s){this.pos=t||new o,this.w=e||0,this.h=s||0}function h(){this.a=null,this.b=null,this.overlapN=new o,this.overlapV=new o,this.clear()}i.Vector=o,i.V=o,o.prototype.copy=o.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},o.prototype.clone=o.prototype.clone=function(){return new o(this.x,this.y)},o.prototype.perp=o.prototype.perp=function(){var t=this.x;return this.x=this.y,this.y=-t,this},o.prototype.rotate=o.prototype.rotate=function(t){var e=this.x,s=this.y;return this.x=e*Math.cos(t)-s*Math.sin(t),this.y=e*Math.sin(t)+s*Math.cos(t),this},o.prototype.reverse=o.prototype.reverse=function(){return this.x=-this.x,this.y=-this.y,this},o.prototype.normalize=o.prototype.normalize=function(){var t=this.len();return t>0&&(this.x=this.x/t,this.y=this.y/t),this},o.prototype.add=o.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},o.prototype.sub=o.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},o.prototype.scale=o.prototype.scale=function(t,e){return this.x*=t,this.y*=e||t,this},o.prototype.project=o.prototype.project=function(t){var e=this.dot(t)/t.len2();return this.x=e*t.x,this.y=e*t.y,this},o.prototype.projectN=o.prototype.projectN=function(t){var e=this.dot(t);return this.x=e*t.x,this.y=e*t.y,this},o.prototype.reflect=o.prototype.reflect=function(t){var e=this.x,s=this.y;return this.project(t).scale(2),this.x-=e,this.y-=s,this},o.prototype.reflectN=o.prototype.reflectN=function(t){var e=this.x,s=this.y;return this.projectN(t).scale(2),this.x-=e,this.y-=s,this},o.prototype.dot=o.prototype.dot=function(t){return this.x*t.x+this.y*t.y},o.prototype.len2=o.prototype.len2=function(){return this.dot(this)},o.prototype.len=o.prototype.len=function(){return Math.sqrt(this.len2())},i.Circle=r,r.prototype.getAABB=r.prototype.getAABB=function(){var t=this.r;return new a(this.pos.clone().sub(new o(t,t)),2*t,2*t).toPolygon()},i.Polygon=n,n.prototype.setPoints=n.prototype.setPoints=function(t){if(!this.points||this.points.length!==t.length){var e,s=this.calcPoints=[],i=this.edges=[],r=this.normals=[];for(e=0;e<t.length;e++)s.push(new o),i.push(new o),r.push(new o)}return this.points=t,this._recalc(),this},n.prototype.setAngle=n.prototype.setAngle=function(t){return this.angle=t,this._recalc(),this},n.prototype.setOffset=n.prototype.setOffset=function(t){return this.offset=t,this._recalc(),this},n.prototype.rotate=n.prototype.rotate=function(t){for(var e=this.points,s=e.length,i=0;i<s;i++)e[i].rotate(t);return this._recalc(),this},n.prototype.translate=n.prototype.translate=function(t,e){for(var s=this.points,i=s.length,o=0;o<i;o++)s[o].x+=t,s[o].y+=e;return this._recalc(),this},n.prototype._recalc=function(){var t,e=this.calcPoints,s=this.edges,i=this.normals,o=this.points,r=this.offset,n=this.angle,a=o.length;for(t=0;t<a;t++){var h=e[t].copy(o[t]);h.x+=r.x,h.y+=r.y,0!==n&&h.rotate(n)}for(t=0;t<a;t++){var l=e[t],p=t<a-1?e[t+1]:e[0],c=s[t].copy(p).sub(l);i[t].copy(c).perp().normalize()}return this},n.prototype.getAABB=n.prototype.getAABB=function(){for(var t=this.calcPoints,e=t.length,s=t[0].x,i=t[0].y,r=t[0].x,n=t[0].y,h=1;h<e;h++){var l=t[h];l.x<s?s=l.x:l.x>r&&(r=l.x),l.y<i?i=l.y:l.y>n&&(n=l.y)}return new a(this.pos.clone().add(new o(s,i)),r-s,n-i).toPolygon()},i.Box=a,a.prototype.toPolygon=a.prototype.toPolygon=function(){var t=this.pos,e=this.w,s=this.h;return new n(new o(t.x,t.y),[new o,new o(e,0),new o(e,s),new o(0,s)])},i.Response=h,h.prototype.clear=h.prototype.clear=function(){return this.aInB=!0,this.bInA=!0,this.overlap=Number.MAX_VALUE,this};for(var l=[],p=0;p<10;p++)l.push(new o);var c=[];for(p=0;p<5;p++)c.push([]);var u=new h,y=new a(new o,1e-6,1e-6).toPolygon();function d(t,e,s){for(var i=Number.MAX_VALUE,o=-Number.MAX_VALUE,r=t.length,n=0;n<r;n++){var a=t[n].dot(e);a<i&&(i=a),a>o&&(o=a)}s[0]=i,s[1]=o}function v(t,e,s,i,o,r){var n=c.pop(),a=c.pop(),h=l.pop().copy(e).sub(t),p=h.dot(o);if(d(s,o,n),d(i,o,a),a[0]+=p,a[1]+=p,n[0]>a[1]||a[0]>n[1])return l.push(h),c.push(n),c.push(a),!0;if(r){var u,y,v=0;n[0]<a[0]?(r.aInB=!1,n[1]<a[1]?(v=n[1]-a[0],r.bInA=!1):v=(u=n[1]-a[0])<(y=a[1]-n[0])?u:-y):(r.bInA=!1,n[1]>a[1]?(v=n[0]-a[1],r.aInB=!1):v=(u=n[1]-a[0])<(y=a[1]-n[0])?u:-y);var f=Math.abs(v);f<r.overlap&&(r.overlap=f,r.overlapN.copy(o),v<0&&r.overlapN.reverse())}return l.push(h),c.push(n),c.push(a),!1}function f(t,e){var s=t.len2(),i=e.dot(t);return i<0?w:i>s?g:x}i.isSeparatingAxis=v;var w=-1,x=0,g=1;function m(t,e,s){for(var i=l.pop().copy(e.pos).sub(t.pos),o=e.r,r=o*o,n=t.calcPoints,a=n.length,h=l.pop(),p=l.pop(),c=0;c<a;c++){var u=c===a-1?0:c+1,y=0===c?a-1:c-1,d=0,v=null;h.copy(t.edges[c]),p.copy(i).sub(n[c]),s&&p.len2()>r&&(s.aInB=!1);var x=f(h,p);if(x===w){h.copy(t.edges[y]);var m=l.pop().copy(i).sub(n[y]);if((x=f(h,m))===g){if((A=p.len())>o)return l.push(i),l.push(h),l.push(p),l.push(m),!1;s&&(s.bInA=!1,v=p.normalize(),d=o-A)}l.push(m)}else if(x===g){if(h.copy(t.edges[u]),p.copy(i).sub(n[u]),(x=f(h,p))===w){if((A=p.len())>o)return l.push(i),l.push(h),l.push(p),!1;s&&(s.bInA=!1,v=p.normalize(),d=o-A)}}else{var b=h.perp().normalize(),A=p.dot(b),I=Math.abs(A);if(A>0&&I>o)return l.push(i),l.push(b),l.push(p),!1;s&&(v=b,d=o-A,(A>=0||d<2*o)&&(s.bInA=!1))}v&&s&&Math.abs(d)<Math.abs(s.overlap)&&(s.overlap=d,s.overlapN.copy(v))}return s&&(s.a=t,s.b=e,s.overlapV.copy(s.overlapN).scale(s.overlap)),l.push(i),l.push(h),l.push(p),!0}function b(t,e,s){for(var i=t.calcPoints,o=i.length,r=e.calcPoints,n=r.length,a=0;a<o;a++)if(v(t.pos,e.pos,i,r,t.normals[a],s))return!1;for(a=0;a<n;a++)if(v(t.pos,e.pos,i,r,e.normals[a],s))return!1;return s&&(s.a=t,s.b=e,s.overlapV.copy(s.overlapN).scale(s.overlap)),!0}i.pointInCircle=function(t,e){var s=l.pop().copy(t).sub(e.pos),i=e.r*e.r,o=s.len2();return l.push(s),o<=i},i.pointInPolygon=function(t,e){y.pos.copy(t),u.clear();var s=b(y,e,u);return s&&(s=u.aInB),s},i.testCircleCircle=function(t,e,s){var i=l.pop().copy(e.pos).sub(t.pos),o=t.r+e.r,r=o*o,n=i.len2();if(n>r)return l.push(i),!1;if(s){var a=Math.sqrt(n);s.a=t,s.b=e,s.overlap=o-a,s.overlapN.copy(i.normalize()),s.overlapV.copy(i).scale(s.overlap),s.aInB=t.r<=e.r&&a<=e.r-t.r,s.bInA=e.r<=t.r&&a<=t.r-e.r}return l.push(i),!0},i.testPolygonCircle=m,i.testCirclePolygon=function(t,e,s){var i=m(e,t,s);if(i&&s){var o=s.a,r=s.aInB;s.overlapN.reverse(),s.overlapV.reverse(),s.a=s.b,s.b=o,s.aInB=s.bInA,s.bInA=r}return i},i.testPolygonPolygon=b;const A=i;(()=>{window.game=new class{constructor(){this.update=this.update.bind(this),this.render=this.render.bind(this),this.updateInterval=setInterval(this.update,1e3/60),this.renderRAF=requestAnimationFrame(this.render),this.onUpdateSet=!1,this.onRenderSet=!1;let t=document.createElement("a");t.href="/#games",t.innerText="Back",t.className="btn-back",document.body.appendChild(t);let i=document.createElement("div");i.className="canvas-wrap",window.canvas=document.createElement("canvas"),canvas.setAttribute("width",1008),canvas.setAttribute("height",567),i.appendChild(canvas),document.body.appendChild(i),window.ctx=canvas.getContext("2d"),this.input=new e,this.graphics=new class{constructor(){this.isAnimating=!1}repeatAction(t,e,s){this.isAnimating=!0;let i=0,o=setInterval((()=>{i++>e?(clearInterval(o),this.isAnimating=!1):s()}),t)}},this.view=new class{constructor(){this.privates={bgColor:"#ccc"},this.init()}then(t){this.privates.callback=t}init(){}update(){}render(){ctx.fillStyle=this.privates.bgColor,ctx.fillRect(0,0,canvas.width,canvas.height)}},this.utils=new s(this)}update(){this.view.update(),this.onUpdateSet&&this.onUpdate()}render(){this.renderRAF=requestAnimationFrame(this.render),this.view.render(),this.onRenderSet&&this.onRender()}onUpdate(t){this.onUpdateSet=!0,this.onUpdate=t}onRender(t){this.onRenderSet=!0,this.onRender=t}stop(){clearInterval(this.updateInterval),cancelAnimationFrame(this.renderRAF)}};let i=new class{constructor(t){this.cta="Press Enter",this.privates={title:t},this.init()}then(t){this.privates.callback=t}init(){this.title=this.privates.title}update(){13===game.input.lastKeyDown&&(game.input.lastKeyDown=t,this.privates.callback())}render(){ctx.fillStyle="#000",ctx.fillRect(0,0,canvas.width,canvas.height),ctx.font="36px Arial",ctx.fillStyle="#fff",ctx.fillText(this.title,canvas.width/2-ctx.measureText(this.title).width/2,100),ctx.font="24px Arial",ctx.fillText(this.cta,canvas.width/2-ctx.measureText(this.cta).width/2,canvas.height/2)}}("Vamp: The Great and Powerful",!0),o=new class{constructor(){this.title="Select a save slot",this.storage=new class{load(t){return localStorage[`slot ${t}`]}getList(){const t=this.load(0),e=this.load(1),s=this.load(2),i="---";return[void 0!==t?t:i,void 0!==e?e:i,void 0!==s?s:i]}save(t,e){localStorage[`slot ${t}`]=e}erase(t){return localStorage.removeItem(`slot ${t}`),this.getList()}},this.list=this.storage.getList(),this.privates={},this.init()}then(t){this.privates.callback=t}init(){this.arrow={img:">>",slot:0,x:canvas.width/2-ctx.measureText(this.list[0]).width/2-60,y:200}}update(){if(27===game.input.lastKeyDown)game.input.lastKeyDown=t,this.privates.callback(27);else if(13===game.input.lastKeyDown){game.input.lastKeyDown=t;const e=new Date,s=e.getMonth()+1,i=e.getDate(),o=e.getFullYear(),r=e.toLocaleTimeString();this.storage.save(this.arrow.slot,`${s}/${i}/${o} ${r}`),this.privates.callback(13)}else 46===game.input.lastKeyDown?(game.input.lastKeyDown=t,this.list=this.storage.erase(this.arrow.slot)):2!==this.arrow.slot&&40===game.input.lastKeyDown?(game.input.lastKeyDown=t,++this.arrow.slot,this.arrow.x=canvas.width/2-ctx.measureText(this.list[this.arrow.slot]).width/2-60,this.arrow.y+=80):0!==this.arrow.slot&&38===game.input.lastKeyDown&&(game.input.lastKeyDown=t,--this.arrow.slot,this.arrow.x=canvas.width/2-ctx.measureText(this.list[this.arrow.slot]).width/2-60,this.arrow.y-=80)}render(){ctx.fillStyle="#111",ctx.fillRect(0,0,canvas.width,canvas.height),ctx.font="36px Arial",ctx.fillStyle="#fff",ctx.fillText(this.title,canvas.width/2-ctx.measureText(this.title).width/2,80),ctx.font="24px Arial";for(let t=0;t<this.list.length;++t)ctx.fillText(this.list[t],canvas.width/2-ctx.measureText(this.list[t]).width/2,200+80*t);ctx.fillText(this.arrow.img,this.arrow.x,this.arrow.y)}};const r=new class{constructor(){this.speed=4,this.w=40,this.h=40,this.hp=3,this.invincible=!1,this.invincibleTimer=120,this.dead=!1,Object.assign(this,new A.Box(new A.Vector(0,0),this.w,this.h).toPolygon())}update(){game.input.keysDown[39]?this.pos.x+=this.speed:game.input.keysDown[37]&&(this.pos.x-=this.speed),game.input.keysDown[38]?this.pos.y-=this.speed:game.input.keysDown[40]&&(this.pos.y+=this.speed),this.hp<=0&&!this.dead&&(this.dead=!0,alert("You died"),location.reload())}render(){if(this.dead)return;let t=!0;if(this.invincible){const e=this.invincibleTimer%30;e>=0&&e<15&&(t=!1)}t&&(ctx.fillStyle="yellow",ctx.fillRect(this.pos.x,this.pos.y,this.w,this.h)),ctx.fillStyle="red";for(let t=0;t<this.hp;++t)ctx.fillRect(this.pos.x-10+20*t,this.pos.y-20,20,10)}},n=new class{constructor(){this.projectiles=[];for(let t=0;t<10;++t){let t=new A.Box(new A.Vector(Math.floor(Math.random()*canvas.width+0),canvas.height),10,20).toPolygon();t.speed=.1*Math.floor(10*Math.random()+3),this.projectiles.push(t)}}update(){for(let t=0;t<this.projectiles.length;++t)this.projectiles[t].pos.y-=this.projectiles[t].speed}render(){ctx.fillStyle="#000",ctx.fillRect(0,0,canvas.width,canvas.height),ctx.fillStyle="silver";for(let t=0;t<this.projectiles.length;++t)ctx.fillRect(this.projectiles[t].pos.x,this.projectiles[t].pos.y,10,20)}},a=new class{constructor(t,e){this.onUpdateSet=!1,this.onRenderSet=!1,this.privates={},this.player=t,this.curLvl=e,this.init()}then(t){this.privates.callback=t}init(){}update(){this.curLvl.update(),this.player.update(),this._checkCollision()}onUpdate(t){this.onUpdateSet=!0,this.onUpdate=t}render(){this.curLvl.render(),this.player.render()}onRender(t){this.onRenderSet=!0,this.onRender=t}_checkCollision(){if(this.player.invincible)0==this.player.invincibleTimer--&&(this.player.invincible=!1,this.player.invincibleTimer=120);else for(let t=0;t<this.curLvl.projectiles.length;++t)if(A.testPolygonPolygon(this.player,this.curLvl.projectiles[t])){--this.player.hp,this.player.invincible=!0;break}}}(r,n);i.then((()=>{game.utils.switchView(o)})),o.then((t=>{27===t?game.utils.switchView(i):13===t&&game.utils.switchView(a)})),game.view=i})()})();</script></body></html>